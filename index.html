<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Vision Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="real.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/2.1.1/tesseract.min.js"></script>
    
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Currency Vision Pro</title>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="real.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/2.1.1/tesseract.min.js"></script>
        
        <script>
            // Currency symbols mapping
            const currencySymbols = {
                '$': 'USD',
                '€': 'EUR',
                '£': 'GBP',
                '¥': 'JPY',
                '₣': 'CHF',
                '₹': 'INR',
                '₦': 'NGN',
                '₵': 'GHS',
                '₽': 'RUB',
                '₿': 'BTC'
            };
    
            window.onload = function() {
                if (localStorage.getItem('isLoggedIn') !== 'true') {
                    window.location.href = 'auth.html';
                }
                showSection('home');
                initializeStyles();
            };
    
            function initializeStyles() {
                const style = document.createElement('style');
                style.textContent = `
                    .scan-button {
                        padding: 10px 20px;
                        background: #007bff;
                        color: white;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                        font-size: 16px;
                    }
    
                    .scan-button:hover {
                        background: #0056b3;
                    }
    
                    #scan-area {
                        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
                    }
    
                    .upload-box {
                        background: white;
                        padding: 20px;
                        border-radius: 10px;
                    }
                `;
                document.head.appendChild(style);
            }
    
            function showSection(sectionId) {
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');
            }
    
            // Enhanced image processing function
            async function processImage(imageData) {
                const result = await Tesseract.recognize(
                    imageData,
                    'eng',
                    {
                        logger: m => console.log(m)
                    }
                );
    
                const text = result.data.text;
                
                // Look for currency symbols
                let detectedCurrency = null;
                for (const [symbol, currency] of Object.entries(currencySymbols)) {
                    if (text.includes(symbol)) {
                        detectedCurrency = currency;
                        break;
                    }
                }
    
                // Extract numbers (including decimals)
                const numbers = text.match(/\d+([.,]\d+)?/g);
                
                if (numbers && numbers.length > 0) {
                    document.getElementById('amount').value = numbers[0].replace(',', '.');
                    
                    if (detectedCurrency) {
                        document.getElementById('fromCurrency').value = detectedCurrency;
                    }
                    
                    return true;
                } else {
                    throw new Error('No valid amount detected');
                }
            }
    
            // File upload functionality
            function setupFileUpload() {
                const uploadUI = document.createElement('div');
                uploadUI.innerHTML = `
                    <div id="upload-container" style="
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.9);
                        z-index: 1000;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                    ">
                        <div class="upload-box">
                            <h3>Upload Currency Image</h3>
                            <input type="file" id="file-input" accept="image/*" style="display: none;">
                            <div id="drop-zone" style="
                                border: 2px dashed #ccc;
                                padding: 20px;
                                margin: 20px 0;
                                cursor: pointer;
                                background: #f9f9f9;
                            ">
                                <p>Drag & Drop image here or click to select</p>
                                <img id="preview-image" style="max-width: 100%; display: none; margin-top: 10px;">
                            </div>
                            <div style="display: flex; justify-content: center; gap: 10px;">
                                <button id="process-upload" class="scan-button">Process Image</button>
                                <button id="close-upload" class="scan-button">Close</button>
                            </div>
                        </div>
                    </div>
                `;
    
                document.body.appendChild(uploadUI);
                setupUploadHandlers();
            }
    
            function setupUploadHandlers() {
                const dropZone = document.getElementById('drop-zone');
                const fileInput = document.getElementById('file-input');
                const previewImage = document.getElementById('preview-image');
                const processButton = document.getElementById('process-upload');
                const closeButton = document.getElementById('close-upload');
    
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.style.borderColor = '#007bff';
                });
    
                dropZone.addEventListener('dragleave', () => {
                    dropZone.style.borderColor = '#ccc';
                });
    
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.style.borderColor = '#ccc';
                    const file = e.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        handleFile(file);
                    }
                });
    
                dropZone.addEventListener('click', () => {
                    fileInput.click();
                });
    
                fileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        handleFile(file);
                    }
                });
    
                processButton.addEventListener('click', async () => {
                    if (!previewImage.src) {
                        alert('Please select an image first');
                        return;
                    }
    
                    try {
                        const result = await processImage(previewImage.src);
                        closeUpload();
                    } catch (error) {
                        alert('Error processing image: ' + error.message);
                    }
                });
    
                closeButton.addEventListener('click', closeUpload);
            }
    
            function handleFile(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('preview-image').src = e.target.result;
                    document.getElementById('preview-image').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
    
            function closeUpload() {
                document.getElementById('upload-container').remove();
            }
    
            // Scanner functionality
            async function initializeScanner() {
                const video = document.createElement('video');
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
    
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { 
                            facingMode: 'environment',
                            width: { ideal: 1280 },
                            height: { ideal: 720 }
                        } 
                    });
                    
                    video.srcObject = stream;
                    video.setAttribute('playsinline', true);
                    await video.play();
    
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
    
                    const scannerUI = document.createElement('div');
                    scannerUI.innerHTML = `
                        <div id="scanner-container" style="
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0,0,0,0.9);
                            z-index: 1000;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                        ">
                            <div id="viewfinder" style="
                                position: relative;
                                width: 80%;
                                max-width: 500px;
                                aspect-ratio: 16/9;
                                border: 2px solid #fff;
                                border-radius: 10px;
                                overflow: hidden;
                            ">
                                <video id="scanner-video" style="
                                    width: 100%;
                                    height: 100%;
                                    object-fit: cover;
                                "></video>
                                <div id="scan-area" style="
                                    position: absolute;
                                    top: 50%;
                                    left: 50%;
                                    transform: translate(-50%, -50%);
                                    width: 200px;
                                    height: 100px;
                                    border: 2px solid #00ff00;
                                    border-radius: 5px;
                                "></div>
                            </div>
                            <div style="
                                margin-top: 20px;
                                display: flex;
                                gap: 10px;
                            ">
                                <button id="capture-btn" class="scan-button">Capture</button>
                                <button id="close-scanner" class="scan-button">Close</button>
                            </div>
                        </div>
                    `;
    
                    document.body.appendChild(scannerUI);
                    const scannerVideo = document.getElementById('scanner-video');
                    scannerVideo.srcObject = stream;
    
                    document.getElementById('capture-btn').addEventListener('click', async () => {
                        context.drawImage(video, 0, 0, canvas.width, canvas.height);
                        const imageData = canvas.toDataURL('image/png');
                        
                        try {
                            await processImage(imageData);
                            closeScanner();
                        } catch (error) {
                            alert(error.message);
                        }
                    });
    
                    document.getElementById('close-scanner').addEventListener('click', () => {
                        closeScanner(stream);
                    });
    
                } catch (error) {
                    console.error('Error accessing camera:', error);
                    alert('Unable to access camera. Please make sure you have granted camera permissions.');
                }
            }
    
            function closeScanner(stream) {
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                }
                document.getElementById('scanner-container').remove();
            }
    
            function captureCurrency() {
                const options = document.createElement('div');
                options.innerHTML = `
                    <div id="capture-options" style="
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: white;
                        padding: 20px;
                        border-radius: 10px;
                        z-index: 1000;
                        box-shadow: 0 0 10px rgba(0,0,0,0.5);
                    ">
                        <h3 style="margin-bottom: 20px;">Choose Input Method</h3>
                        <div style="display: flex; gap: 10px;">
                            <button id="camera-option" class="scan-button">
                                <i class="fas fa-camera"></i> Use Camera
                            </button>
                            <button id="upload-option" class="scan-button">
                                <i class="fas fa-upload"></i> Upload Image
                            </button>
                        </div>
                    </div>
                `;
    
                document.body.appendChild(options);
    
                document.getElementById('camera-option').addEventListener('click', () => {
                    document.getElementById('capture-options').remove();
                    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                        alert('Sorry, your browser doesn\'t support camera access');
                        return;
                    }
                    initializeScanner();
                });
    
                document.getElementById('upload-option').addEventListener('click', () => {
                    document.getElementById('capture-options').remove();
                    setupFileUpload();
                });
            }
    
            // Voice Recognition function remains the same
            function startVoiceRecognition() {
                const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'en-US';
                recognition.interimResults = false;
    
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    const amount = extractCurrencyAmount(transcript);
                    if (amount) {
                        document.getElementById('amount').value = amount;
                    } else {
                        alert("Please say a valid amount along with currency, e.g., 'fifty dollars'.");
                    }
                };
    
                recognition.onerror = (event) => {
                    console.error('Error occurred in recognition: ' + event.error);
                };
    
                recognition.start();
            }
    
            // Rest of your existing functions remain the same
            function extractCurrencyAmount(text) {
                const regex = /(\d+(\.\d+)?)/;
                const match = text.match(regex);
                return match ? match[0] : null;
            }
    
            // Keep all other existing functions...
            
            // Your existing logout function
            function logout() {
                localStorage.removeItem('isLoggedIn');
                window.location.href = 'auth.html';
            }
    
            // Dark Mode Toggle function remains the same
            function toggleDarkMode() {
                document.body.classList.toggle('dark-mode');
                const mode = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
                localStorage.setItem('theme', mode);
            }
        </script>
    </head>
<body>
   <header>
  <div class="logo-container">
    <img class="logo" src="pictures/hd5.jpg" alt="Currency Vision Pro Logo">
  </div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <nav>
    <ul>
      <li>
        <a href="#" onclick="showSection('home')" class="active">
          <i class="fas fa-home"></i> Home
        </a>
      </li>
      <li>
        <a href="#" onclick="showSection('features')">
          <i class="fas fa-star"></i> Features
        </a>
      </li>
      <li>
        <a href="#" onclick="showSection('converter')">
          <i class="fas fa-exchange-alt"></i> Converter
        </a>
      </li>
      <li>
        <a href="#" onclick="showSection('about')">
          <i class="fas fa-info-circle"></i> About
        </a>
      </li>
      <li>
        <a href="#" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </li>
      <li>
        <a href="#" onclick="toggleDarkMode()">
          <i class="fas fa-moon"></i> Dark Mode
        </a>
      </li>
    </ul>
  </nav>
</header>
    
    <div class="container">
        <!-- Home section -->
        <section id="home" class="section active">
            <p>Experience the future of currency conversion with real-time rates, voice recognition, and camera input.</p>
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="feature-icon">🔊</div>
                    <h3>Voice Recognize</h3>
                    <p>Convert currencies hands-free with our advanced voice recognition technology.</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📷</div>
                    <h3>Camera OCR</h3>
                    <p>Scan currency notes or text to instantly input amounts for conversion.</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🌍</div>
                    <h3>Global Coverage</h3>
                    <p>Access exchange rates for over 170 currencies worldwide.</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">⚡</div>
                    <h3>Real-time Updates</h3>
                    <p>Get the latest exchange rates updated every minute.</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📈</div>
                    <h3>Exchange Rate Trends</h3>
                    <p>Analyze trends with historical data and make informed financial decisions.</p>
                </div>
            </div>
            <h2>Our Achievements</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <h3>180+</h3>
                    <p>Currencies Supported</p>
                </div>
                <div class="stat-item">
                    <h3>50+</h3>
                    <p>Cryptocurrencies Included</p>
                </div>
                <div class="stat-item">
                    <h3>1M+</h3>
                    <p>Users Worldwide</p>
                </div>
                <div class="stat-item">
                    <h3>24/7</h3>
                    <p>Customer Support</p>
                </div>
            </div>
        </section>

        <!-- Converter section -->
        <section id="converter" class="section">
            <div class="converter">
                <h2>Currency Converter</h2>
                <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
                    <select id="fromCurrency">
                        <option value="USD">USD - US Dollar</option>
                        <option value="EUR">EUR - Euro</option>
                        <option value="GBP">GBP - British Pound</option>
                        <option value="JPY">JPY - Japanese Yen</option>
                        <option value="CAD">CAD - Canadian Dollar</option>
                        <option value="AUD">AUD - Australian Dollar</option>
                        <option value="CHF">CHF - Swiss Franc</option>
                        <option value="CNY">CNY - Chinese Yuan</option>
                        <option value="GHS">GHS - Ghanaian Cedi</option>
                        <option value="NGN">NGN - Nigerian Naira</option>
                        <option value="ZAR">ZAR - South African Rand</option>
                        <option value="INR">INR - Indian Rupee</option>
                        <option value="BRL">BRL - Brazilian Real</option>
                        <option value="RUB">RUB - Russian Ruble</option>
                        <option value="MXN">MXN - Mexican Peso</option>
                        <option value="KRW">KRW - South Korean Won</option>
                        <option value="SGD">SGD - Singapore Dollar</option>
                        <option value="NZD">NZD - New Zealand Dollar</option>
                        <option value="TRY">TRY - Turkish Lira</option>
                        <option value="HKD">HKD - Hong Kong Dollar</option>
                        <option value="SEK">SEK - Swedish Krona</option>
                        <option value="NOK">NOK - Norwegian Krone</option>
                        <option value="DKK">DKK - Danish Krone</option>
                        <option value="PLN">PLN - Polish Złoty</option>
                        <option value="THB">THB - Thai Baht</option>
                        <option value="IDR">IDR - Indonesian Rupiah</option>
                        <option value="PHP">PHP - Philippine Peso</option>
                        <option value="MYR">MYR - Malaysian Ringgit</option>
                        <option value="PKR">PKR - Pakistani Rupee</option>
                        <option value="ILS">ILS - Israeli Shekel</option>
                        <option value="AED">AED - UAE Dirham</option>
                        <option value="SAR">SAR - Saudi Riyal</option>
                        <option value="QAR">QAR - Qatari Riyal</option>
                        <option value="KWD">KWD - Kuwaiti Dinar</option>
                        <option value="DOGE">DOGE - Dogecoin</option>
                        <option value="USDT">USDT - Tether</option>
                        <option value="TRX">TRX - Tron</option>
                        <option value="BSV">BSV - Bitcoin SV</option>
                        <option value="ETC">ETC - Ethereum Classic</option>
                        <option value="QTUM">QTUM - Qtum</option>
                        <option value="VET">VET - VeChain</option>
                        <option value="ZIL">ZIL - Zilliqa</option>
                        <option value="WAVES">WAVES - Waves</option>
                    </select>
                    <select id="toCurrency">
                        <option value="USD">USD - US Dollar</option>
                        <option value="EUR">EUR - Euro</option>
                        <option value="GBP">GBP - British Pound</option>
                        <option value="JPY">JPY - Japanese Yen</option>
                        <option value="CAD">CAD - Canadian Dollar</option>
                        <option value="AUD">AUD - Australian Dollar</option>
                        <option value="CHF">CHF - Swiss Franc</option>
                        <option value="CNY">CNY - Chinese Yuan</option>
                        <option value="GHS">GHS - Ghanaian Cedi</option>
                        <option value="NGN">NGN - Nigerian Naira</option>
                        <option value="ZAR">ZAR - South African Rand</option>
                        <option value="INR">INR - Indian Rupee</option>
                        <option value="BRL">BRL - Brazilian Real</option>
                        <option value="RUB">RUB - Russian Ruble</option>
                        <option value="MXN">MXN - Mexican Peso</option>
                        <option value="KRW">KRW - South Korean Won</option>
                        <option value="SGD">SGD - Singapore Dollar</option>
                        <option value="NZD">NZD - New Zealand Dollar</option>
                        <option value="TRY">TRY - Turkish Lira</option>
                        <option value="HKD">HKD - Hong Kong Dollar</option>
                        <option value="SEK">SEK - Swedish Krona</option>
                        <option value="NOK">NOK - Norwegian Krone</option>
                        <option value="DKK">DKK - Danish Krone</option>
                        <option value="PLN">PLN - Polish Złoty</option>
                        <option value="THB">THB - Thai Baht</option>
                        <option value="IDR">IDR - Indonesian Rupiah</option>
                        <option value="PHP">PHP - Philippine Peso</option>
                        <option value="MYR">MYR - Malaysian Ringgit</option>
                        <option value="PKR">PKR - Pakistani Rupee</option>
                        <option value="ILS">ILS - Israeli Shekel</option>
                        <option value="AED">AED - UAE Dirham</option>
                        <option value="SAR">SAR - Saudi Riyal</option>
                        <option value="QAR">QAR - Qatari Riyal</option>
                        <option value="KWD">KWD - Kuwaiti Dinar</option>
                        <option value="DOGE">DOGE - Dogecoin</option>
                        <option value="USDT">USDT - Tether</option>
                        <option value="TRX">TRX - Tron</option>
                        <option value="BSV">BSV - Bitcoin SV</option>
                        <option value="ETC">ETC - Ethereum Classic</option>
                        <option value="QTUM">QTUM - Qtum</option>
                        <option value="VET">VET - VeChain</option>
                        <option value="ZIL">ZIL - Zilliqa</option>
                        <option value="WAVES">WAVES - Waves</option>      
                    </select>
                </div>
                <input type="number" id="amount" placeholder="Enter amount" />
                <button id="convertButton">Convert</button>
                <div class="result" id="result"></div>
                <div class="trendResult" id="trendResult"></div>
                <button class="voice-btn" onclick="startVoiceRecognition()">🎤 Voice Input</button>
                <button class="capture-btn" onclick="captureCurrency()">📸 Capture Input</button>
            </div>
            <div style="margin-top: 20px;">
                <canvas id="rateChart" width="400" height="200"></canvas>
            </div>            
        </section>

        <!-- Features section -->
        <section id="features" class="section">
            <div class="features-container">
                <div class="feature-item">
                    <span>💱</span>
                    <h3>Real-Time Currency Data</h3>
                    <p>Access live rates for 180+ currencies and 50 cryptocurrencies, updated every minute.</p>
                </div>
                <div class="feature-item">
                    <span>📊</span>
                    <h3>Multi-Currency Calculator</h3>
                    <p>Includes historical exchange rate data for smarter decision-making and comparisons.</p>
                </div>
                <div class="feature-item">
                    <span>🎤</span>
                    <h3>Voice Recognition</h3>
                    <p>Convert currencies hands-free with advanced speech-to-text processing.</p>
                </div>
                <div class="feature-item">
                    <span>🤖</span>
                    <h3>AI-Powered Conversion</h3>
                    <p>Leverages machine learning for predictive analytics and smart suggestions.</p>
                </div>
                <div class="feature-item">
                    <span>📱</span>
                    <h3>Responsive Design</h3>
                    <p>Seamlessly switch between devices with a fully responsive layout and mobile apps.</p>
                </div>
                <div class="feature-item">
                    <span>🔗</span>
                    <h3>RESTful API</h3>
                    <p>Integrate our powerful currency services into your own applications with ease.</p>
                </div>
            </div>
        </section>

        <!-- About section -->
        <section id="about" class="section">
            <div class="about-container">
                <h2 class="about-title">About Us</h2>
                <p class="about-description">
                    Currency Vision Pro is revolutionizing how the world handles currency conversion. Our goal is to provide a seamless, intuitive, and efficient experience for individuals and businesses alike. With cutting-edge technology, we ensure accurate data and a user-friendly interface.
                </p>
                
                <!-- New Features Section -->
                <div class="about-features">
                    <div class="about-feature-item">
                        <div class="about-feature-icon">🚀</div>
                        <h3>Our Mission</h3>
                        <p>To simplify currency conversion for everyone, empowering users with the latest tools and technologies.</p>
                    </div>
                    <div class="about-feature-item">
                        <div class="about-feature-icon">🌍</div>
                        <h3>Global Presence</h3>
                        <p>Our platform is trusted by millions worldwide, available in over 30 languages.</p>
                    </div>
                    <div class="about-feature-item">
                        <div class="about-feature-icon">⚙️</div>
                        <h3>Technological Excellence</h3>
                        <p>We leverage AI, real-time APIs, and OCR technology to deliver unparalleled accuracy and performance.</p>
                    </div>
                </div>
        
                <h3 class="team-title">Meet Our Team</h3>
                <div class="team">
                    <div class="team-member">
                        <img src="pictures/hd3.jpeg" alt="Opoku Emmanuel Kwadwo">
                        <h3>Opoku Emmanuel Kwadwo</h3>
                        <p>Lead Developer</p>
                        <p>Opoku leads the development team and ensures that our platform runs smoothly and efficiently.</p>
                    </div>
                    <div class="team-member">
                        <img src="pictures/hd.jpeg" alt="Hadassah Afi Koleki Ocquaye">
                        <h3>Hadassah Afi Koleki Ocquaye</h3>
                        <p>Frontend Developer</p>
                        <p>Hadassah specializes in creating user-friendly interfaces and enhancing user experience.</p>
                    </div>
                    <div class="team-member">
                        <img src="pictures/hd2.jpeg" alt="Gideon Mensah Marfo">
                        <h3>Gideon Mensah Marfo</h3>
                        <p>Backend Developer</p>
                        <p>Gideon focuses on server-side logic and database management to ensure data integrity.</p>
                    </div>
                </div>
            </div>
        </section> 
    </div>

    <footer>
        <p>&copy; 2024 Currency Vision Pro. All rights reserved.</p>
        <p><a href="#" style="color: white; text-decoration: underline;">Privacy Policy</a> | <a href="#" style="color: white; text-decoration: underline;">Terms of Service</a></p>
    </footer>
    <script>
      // Add dropdown menu functionality
       document.querySelectorAll('.has-dropdown').forEach(item => {
            item.addEventListener('mouseenter', () => {
                const dropdown = item.querySelector('.dropdown');
                if (dropdown) {
                    dropdown.style.display = 'block';
                }
            });
            
            item.addEventListener('mouseleave', () => {
                const dropdown = item.querySelector('.dropdown');
                if (dropdown) {
                    dropdown.style.display = 'none';
                }
            });
        }); 
    
        // Handle navigation highlights
        document.querySelectorAll('nav ul li a').forEach(link => {
            link.addEventListener('click', (e) => {
                if (!link.closest('.dropdown')) {
                    document.querySelectorAll('nav ul li a').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                }
            });
        });
    
        // Add smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                if (this.getAttribute('onclick')) return; // Skip if it has onclick handler
                
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        }); 
    </script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script>
        const convertButton = document.getElementById('convertButton');
        const fromCurrency = document.getElementById('fromCurrency');
        const toCurrency = document.getElementById('toCurrency');
        const amountInput = document.getElementById('amount');
        const resultDiv = document.getElementById('result');

        convertButton.addEventListener('click', async () => {
            const from = fromCurrency.value;
            const to = toCurrency.value;
            const amount = parseFloat(amountInput.value);
            if (isNaN(amount) || amount <= 0) {
                resultDiv.textContent = "Please enter a valid amount.";
                return;
            }

            // AI Analysis Functionality
            async function analyzeTrends(fromCurrency) {
                const simulatedData = {
                    USD: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    EUR: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    GBP: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    JPY: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    CNY: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    GHS: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    NGN: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    ZAR: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    INR: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    BRL: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    RUB: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    MXN: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    KRW: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    SGD: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    NZD: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    TRY: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    HKD: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    SEK: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    NOK: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    DKK: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    PLN: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    THB: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    IDR: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    PHP: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    MYR: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    PKR: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    ILS: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    AED: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    SAR: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    QAR: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    KWD: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    DOGE: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    USDT: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    TRX: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    BSV: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    ETC: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    QTUM: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' },
                    VET: { trend: 'Bullish', prediction: 'Expected to rise in the next week.' },
                    ZIL: { trend: 'Bearish', prediction: 'Expected to decline in the next week.' },
                    WAVES: { trend: 'Stable', prediction: 'Expected to remain stable in the next week.' }
                };

                const analysis = simulatedData[fromCurrency] || { trend: 'Unknown', prediction: 'No data available.' };
                document.getElementById('trendResult').textContent = `Trend: ${analysis.trend}. ${analysis.prediction}`;
            }

            try {
                const response = await fetch(`https://open.er-api.com/v6/latest/${from}`);
                const data = await response.json();
                const rate = data.rates[to];
                if (rate) {
                    const convertedAmount = (amount * rate).toFixed(2);
                    resultDiv.textContent = `${amount} ${from} = ${convertedAmount} ${to}`;
                    await analyzeTrends(to); // Call AI analysis after conversion
                } else {
                    resultDiv.textContent = "Currency conversion not available.";
                }
            } catch (error) {
                resultDiv.textContent = "Error fetching exchange rates.";
            }
        });

        function logout() {
            localStorage.removeItem('isLoggedIn'); // Clear the login state
            window.location.href = 'auth.html'; // Redirect to the login page
        }
    </script>
</body>
</html>